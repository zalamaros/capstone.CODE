<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>EXPLORE MY WORLD</title>

    <!-- styling within the page because idk why i tried to move it to a seperate page and it totally srewed things up -->
    <style>
        html,
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        @font-face {
            font-family: 'Azedo';
            src: url('misc/Azedo-Bold.otf');
        }

        @font-face {
            font-family: 'EurostileBold';
            src: url('misc/EurostileBold.ttf');
        }

        #back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            width: 40px;
            height: 40px;
            background: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: white;
            font-size: 24px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        #back-button:hover {
            transform: scale(1.1);
        }

        #intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        #intro-text-box {
            color: white;
            width: 50%;
            font-family: 'EurostileBold';
            font-size: 25pt;
            padding: 2rem;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #intro-text-box:hover {
            transform: scale(1.05);
        }

        /* General for little buttons */
        .tiny-button {
            position: absolute;
            pointer-events: auto;
            font-family: EurostileBold;
            background: none;
            color: white;
            font-size: 50px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            animation: oscillate 1s infinite ease-in-out;
            transition: all 0.3s ease;
        }

        .tiny-button:hover {
            transform: scale(1.2);
        }

        @keyframes oscillate {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        /* Location Containers */
        .location {
            margin-bottom: 40px;
        }

        .button-container {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            /* Allow clicks to pass through empty areas */
        }

        .text-box-container {
            display: flex;
            flex-direction: column;
        }

        /* for clickthrough text box */
        .clickthrough-text-box {
            font-family: 'EurostileBold';
            position: fixed;
            top: 50%;
            left: 50%;
            width: 17%;
            background-color: rgba(255, 255, 255);
            color: #003300;
            padding: 5px;
            border-radius: 20px;
            z-index: 1000;
            display: none;
            transform: translate(-55%, -50%);
        }

        .text-box-content {
            text-align: center;
        }

        .close-text-box {
            font-family: 'EurostileBold';
            background-color: white;
            color: #003300;
            padding: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 0px;
        }

        .close-text-box:hover {
            font-family: 'EurostileBold';
            background-color: #E5E5E5;
        }


        .hidden {
            display: none;
        }
    </style>

</head>

<body>

    <a href="solarMAP.html" id="back-button">←</a>

    <div id="intro-overlay">
        <div id="intro-text-box">
            <div id="intro-text">Loading...</div>
        </div>
    </div>

    <!-- LITTLE STORY BUTTONS IN SCENES-->
    <div class="location" id="palisades">
        <div class="button-container">
            <button class="tiny-button" id="btn-palisades-1" style="top: 15%; left: 20%;">⊙</button>
            <button class="tiny-button" id="btn-palisades-2" style="top: 10%; left: 50%;">⊙</button>
            <button class="tiny-button" id="btn-palisades-3" style="top: 20%; left: 60%;">⊙</button>
            <button class="tiny-button" id="btn-palisades-4" style="top: 80%; left: 70%;">⊙</button>
            <button class="tiny-button hold-button" id="hold-palisades"
                style="top: 95%; left: 85%; font-size: 20px; animation: oscillate 3s infinite ease-in-out;">before
                the
                revolution</button>
        </div>
        <div class="text-box-container">
            <div id="text-box-palisades-1" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>Small communities hold tight knit families and residents that have small personal gardens, with
                        homes that blend into the hills of grass. They are surrounded by fire resistant plants, and have
                        especially effective systems of both ventilation and insulation for their homes to optimize
                        energy usage.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-palisades-2" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>In an energy grid reformatted to be reliant by renewable energy, Los Angeles Solar has a
                        particular persistence of transmission towers to ensure the transport of many different forms of
                        renewable energy across a large city. </p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-palisades-3" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>With solar panels and other means of generating sustainable energy connected to every home,
                        people can generate their own electricity needs, and not rely on faraway sources with
                        invisible systems.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-palisades-4" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>The New palisades was a community born from tragedy, and quite experimental, thus learning
                        through action.
                        They continued to receive support from the rest of LA, and afterwards helped
                        other communities to make the sustainable transition - this was a landmark occurence of unity
                        among citizens. </p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="location" id="lax">
        <div class="button-container">
            <button class="tiny-button" id="btn-lax-1" style="top: 15%; left: 40%;">⊙</button>
            <button class="tiny-button" id="btn-lax-2" style="top: 50%; left: 60%;">⊙</button>
            <button class="tiny-button" id="btn-lax-3" style="top: 80%; left: 40%;">⊙</button>
            <button class="tiny-button hold-button" id="hold-lax"
                style="top: 93%; left: 85%; font-size: 20px; animation: oscillate 3s infinite ease-in-out;">before the
                revolution</button>
        </div>
        <div class="text-box-container">
            <div id="text-box-lax-1" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>The upper levels of the garage support vertical farms that have different types of plants for
                        both carbon capture, food, and aesthetics. With a filtration system of the airport’s gray water,
                        and support from the new energy grid, the setup contributes to the goal of a more circular
                        airport.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-lax-2" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>The lower levels of the garage were transitioned earlier on into a sort of decarbonized mobility
                        hub to support the movement of large amounts of people through the airport. There, people can
                        find access to many of the airport’s transport methods and are connected to a large
                        majority of the terminals; by way of the modular transit pods, hydrogen bikes with luggage
                        compartments, and train connections.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-lax-3" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>To improve the infamous heavy traffic of the Loop in the old LAX, a modular transit pod system
                        was added
                        to decrease the amount of cars on surface streets. It was a joint effort in the re-planning of
                        the
                        entire airport to improve transport flow and update the developing technology in the aviation
                        industry.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="location" id="santamonicapier">
        <div class="button-container">
            <button class="tiny-button" id="btn-santamonicapier-1" style="top: 45%; left: 15%;">⊙</button>
            <button class="tiny-button" id="btn-santamonicapier-2" style="top: 75%; left: 10%;">⊙</button>
            <button class="tiny-button" id="btn-santamonicapier-3" style="top: 30%; left: 75%;">⊙</button>
            <button class="tiny-button" id="btn-santamonicapier-4" style="top: 80%; left: 90%;">⊙</button>
            <button class="tiny-button hold-button" id="hold-santamonicapier"
                style="top: 93%; left: 85%; font-size: 20px; animation: oscillate 3s infinite ease-in-out;">before the
                revolution</button>
        </div>
    </div>
    <div class="text-box-container">
        <div id="text-box-santamonicapier-1" class="clickthrough-text-box hidden">
            <div class="text-box-content">
                <p>Specialized research domes continuously monitor chemical levels in the water, track the health of
                    local marine life, and rehabilitate marine animals for re-release. Periodically hosting tourist
                    groups for sightseeing and education sessions, they ensure their practice exists in harmony
                    within the ecosystem that it is situated upon. If any visitor or employee is seen littering, they’re
                    subjected to a pecking by the local
                    pelican.</p>
                <button class="close-text-box">Close</button>
            </div>
        </div>
        <div id="text-box-santamonicapier-2" class="clickthrough-text-box hidden">
            <div class="text-box-content">
                <p>Remnants from the crises of the 30s still persist, and water temperature levels have not quite
                    recovered to completely healthy temperatures. On top of that, the persistence of chemical
                    pollution in the water is something that only centuries of time can heal, along with intense
                    effort from experts and volunteers.</p>
                <button class="close-text-box">Close</button>
            </div>
        </div>
        <div id="text-box-santamonicapier-3" class="clickthrough-text-box hidden">
            <div class="text-box-content">
                <p>Two ferris wheels were constructed in a nod to the Pier’s past amusement park attractions.
                    Visitors can step into a glass pod and power their pod by a combination of solar energy, and
                    their own step energy from sensors inside the pod. As the pod glides through the torus, they can
                    enjoy even taller views than the previous ferris wheel.</p>
                <button class="close-text-box">Close</button>
            </div>
        </div>
        <div id="text-box-santamonicapier-4" class="clickthrough-text-box hidden">
            <div class="text-box-content">
                <p>The nearby beach was closed to tourism for many years due to safety hazards and unsafe
                    conditions. Together with the infrastructural change in LA County, more waterside plants found
                    the peace and space to regrow along the coastline during the closure. With it, the sandy shoreline
                    that was washing away with the rising ocean levels began a new era of recovery.</p>
                <button class="close-text-box">Close</button>
            </div>
        </div>
    </div>
    </div>

    <div class="location" id="thewalkoffame">
        <div class="button-container">
            <button class="tiny-button" id="btn-thewalkoffame-1" style="top: 45%; left: 15%;">⊙</button>
            <button class="tiny-button" id="btn-thewalkoffame-2" style="top: 75%; left: 90%;">⊙</button>
            <button class="tiny-button" id="btn-thewalkoffame-3" style="top: 80%; left: 75%;">⊙</button>
            <button class="tiny-button hold-button" id="hold-thewalkoffame"
                style="top: 93%; left: 85%; font-size: 20px; animation: oscillate 3s infinite ease-in-out;">before the
                revolution</button>
        </div>
        <div class="text-box-container">
            <div id="text-box-thewalkoffame-1" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>Greening efforts did take place within the newer buildings that were erected along the avenue,
                        but the existing buildings did not have many renovations, and stand very similar as they did
                        many years ago; the area is now somewhat historic.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-thewalkoffame-2" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>Despite the persistence of old world ideals in other areas of Hollywood, one thing it could not
                        avoid was the permeation of public transport. Once again popular in certain areas was an updated
                        version of the Red Cars of the trolley system in historic Los Angeles. </p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-thewalkoffame-3" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>The number of stars on the Walk only ever grew. Through the turmoil of the Revolution, some
                        celebrities fell to Earth, but others shined brighter than before, capitalizing on the
                        tumultuous events and gaining more public favor. Who was genuine and who was manipulating the
                        public, we might never know. </p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="location" id="newdowntown">
        <div class="button-container">
            <button class="tiny-button" id="btn-newdowntown-1" style="top: 15%; left: 15%;">⊙</button>
            <button class="tiny-button" id="btn-newdowntown-2" style="top: 70%; left: 10%;">⊙</button>
            <button class="tiny-button" id="btn-newdowntown-3" style="top: 60%; left: 75%;">⊙</button>
            <button class="tiny-button hold-button" id="hold-newdowntown"
                style="top: 93%; left: 85%; font-size: 20px; animation: oscillate 3s infinite ease-in-out;">before the
                revolution</button>
        </div>
        <div class="text-box-container">
            <div id="text-box-newdowntown-1" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>The synergistic effects of smog and the urban heat island effect were addressed in the earlier
                        stages of the infrastructural shift when rewilding and vertical greenery were paired with
                        albedo enhanced surfaces in new builds of the downtown area.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-newdowntown-2" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>With infrastructure that supports passive cooling, such as green corridors and wind tunnels
                        built to carry ocean breezes, buildings oriented and shaped to promote natural ventilation, and
                        strategically placed bioswales, a multi-faceted and diverse approach was taken to mind the
                        rising temperatures.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-newdowntown-3" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>Sensor and automation integration into infrastructure was a key assistance in managing such
                        complex and large swaths of metropolitan area. By collecting physical data across the city,
                        machines can optimize water flow, shading, ventilation, and other factors in real time to
                        allocate resources where they need to go, mitigating issues ahead of time.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="location" id="oneten">
        <div class="button-container">
            <button class="tiny-button" id="btn-oneten-1" style="top: 15%; left: 15%;">⊙</button>
            <button class="tiny-button" id="btn-oneten-2" style="top: 65%; left: 50%;">⊙</button>
            <button class="tiny-button" id="btn-oneten-3" style="top: 80%; left: 80%;">⊙</button>
            <button class="tiny-button hold-button" id="hold-oneten"
                style="top: 93%; left: 85%; font-size: 20px; animation: oscillate 3s infinite ease-in-out;">before the
                revolution</button>
        </div>
        <div class="text-box-container">
            <div id="text-box-oneten-1" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>Initial proposals of highway renovations into green belts that are tens of miles long initially
                        faced huge governmental backlash and pessimistic sentiment, with many believing it was not
                        remotely possible to see success of the project. But what was overlooked was the public’s
                        capacity to adapt to new lifestyles in the face of obvious dire need. After completion of the
                        project, public usage of the greenways was slow, but eventually saw exponential increases of
                        appreciation and usage. </p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-oneten-2" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>The United States, in the late 2020s, was seeing record levels of health conditions such as
                        obesity, due to poor lifestyle habits, a corrupt pharmaceutical industry, and corporation
                        dominated food industry that sought profits over public health. Within the shift to
                        sustainability, the same happened in many individual lifestyles. As infrastructure changed to
                        support a life outdoors, overall health of citizens increased as well. There were endless
                        opportunities to walk or bike to the places they needed to be, surrounded by a fresh
                        environment.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-oneten-3" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>Major freeways once divided neighborhoods that were historically communities of color. With
                        conversion into a fusion of public transport and linear parks, Los Angeles saw a healing that
                        was not expected; the divisions almost became a stitch back together of the fragmented
                        communities. Hosting food stalls, pop up shops, and community gatherings, and more, a space that
                        was once only for individual vehicles became a reclaimed center for social healing and equity.
                    </p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="location" id="riodeangeles">
        <div class="button-container">
            <button class="tiny-button" id="btn-riodeangeles-1" style="top: 15%; left: 15%;">⊙</button>
            <button class="tiny-button" id="btn-riodeangeles-2" style="top: 70%; left: 40%;">⊙</button>
            <button class="tiny-button" id="btn-riodeangeles-3" style="top: 20%; left: 90%;">⊙</button>
            <button class="tiny-button" id="btn-riodeangeles-4" style="top: 70%; left: 80%;">⊙</button>
            <button class="tiny-button hold-button" id="hold-riodeangeles"
                style="top: 93%; left: 85%; font-size: 20px; animation: oscillate 3s infinite ease-in-out;">before the
                revolution</button>
        </div>
        <div class="text-box-container">
            <div id="text-box-riodeangeles-1" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>The LA River was originally concreted to address flooding issues. With the broad re-greening
                        of LA in the Solar Revolution, the reestablishment of surrounding wetlands and riparian zones
                        addressed this problem and absorbed excess water during peak flow times. Local flora was spread
                        across the stretch of the river to work together with LA’s natural climate. This goes in tandem
                        with more permeable surfaces and green infrastructure, that all work together to maintain
                        balance.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-riodeangeles-2" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>The previously endangered SoCal Steelhead trout’s population saw a fantastic recovery as the
                        river re-wilding project took place, and its population came back to a healthy level. </p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-riodeangeles-3" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>Along the river residents can utilize various walking trails to view the revitalized river
                        ecosystem and take a breath of calm in the midst of a busy day. Local wildflowers grace some
                        patches of brush, like California Poppies or Golden yarrow.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
            <div id="text-box-riodeangeles-4" class="clickthrough-text-box hidden">
                <div class="text-box-content">
                    <p>An extensive stormwater capture and filtration system was also built into the re-greening of the
                        river, along with other areas of the city, and this effort drastically decreased Los Angeles’
                        reliance on external water sources, and allowed those sources to gradually recover from the
                        overuse.</p>
                    <button class="close-text-box">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">

        import * as THREE from 'https://esm.sh/three@0.152.2';

        let scene, camera, renderer, material, mesh;
        let mouse = { x: 0.5, y: 0.5 };

        // IMAGE SETS
        const imageSets = [
            {
                image: 'solarimgs/110.png',
                depth: 'DMimgs/110DM.png'
            },
            {
                image: 'solarimgs/110OVERHAUL.jpg',
                depth: 'DMimgs/overhaulDM.jpg'
            },
            {
                image: 'solarimgs/LARIVER.png',
                depth: 'DMimgs/lariverDM.jpg'
            },
            {
                image: 'solarimgs/LAXPARKING.jpg',
                depth: 'DMimgs/laxparkingDM.png'
            },
            {
                image: 'solarimgs/palisades1.jpg',
                depth: 'DMimgs/palisadesDM.png'
            },
            {
                image: 'solarimgs/SMPIER.jpg',
                depth: 'DMimgs/smpierDM.png'
            },
            {
                image: 'solarimgs/WALKOFFAME.png',
                depth: 'DMimgs/famewalkDM.png'
            }
        ];

        // URL INFO
        const urlParams = new URLSearchParams(window.location.search);
        const selectedSet = parseInt(urlParams.get('set')) || 0;
        let currentSetIndex = selectedSet;

        warpy();
        animate();

        // focal point distortion effect
        function warpy() {
            scene = new THREE.Scene();
            camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            const loader = new THREE.TextureLoader();
            const img = loader.load(imageSets[currentSetIndex].image);
            const depth = loader.load(imageSets[currentSetIndex].depth);

            material = new THREE.ShaderMaterial({
                uniforms: {
                    uImage: { value: img },
                    uDepth: { value: depth },
                    uMouse: { value: new THREE.Vector2() },
                    uStrength: { value: 0.03 }
                },
                vertexShader: `
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = vec4(position, 1.0);
          }
        `,
                fragmentShader: `
          uniform sampler2D uImage;
          uniform sampler2D uDepth;
          uniform vec2 uMouse;
          uniform float uStrength;
          varying vec2 vUv;
          
          void main() {
            float depth = texture2D(uDepth, vUv).r;
            float zoomFactor = 0.95;
            vec2 zoomedUv = (vUv - 0.5) * zoomFactor + 0.5;
            vec2 offset = (uMouse - 0.5) * 2.0 * uStrength * depth;
            vec2 displacedUv = zoomedUv + offset;
            displacedUv = clamp(displacedUv, 0.0, 1.0);
            vec4 color = texture2D(uImage, displacedUv);
            gl_FragColor = color;
          }
        `
            });

            const geometry = new THREE.PlaneGeometry(2, 2);
            mesh = new THREE.Mesh(geometry, material);
            scene.add(mesh);

            window.addEventListener('mousemove', e => {
                mouse.x = e.clientX / window.innerWidth;
                mouse.y = 1.0 - e.clientY / window.innerHeight;
                material.uniforms.uMouse.value.set(mouse.x, mouse.y);
            });

            window.addEventListener('resize', () => {
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        const locationIntroTexts = {
            'newdowntown': [
                "The skyline of Los Angeles that once boasted the typical towering glass buildings of many cities around the world, eventually underwent a re-greening.",
                "Both with public green space and vertical gardening, a huge effort took place to increase plant cover. A combination of the two, along with decreased Co2 emissions and consistent public maintenance, mitigated the urban heat island phenomenon and amount of smog that was so common in the city."
            ],
            'oneten': [
                "The traffic of Los Angeles was a constant sore spot with locals and tourists alike.",
                "The infamous 405, 110, and other freeways took hours upon hours out of people’s days just from sitting in traffic in their vehicles.",
                "Major highways were gradually converted into newly developed sections of light rail and long stretches of pedestrian greenways where people were free to walk, bike, or skate safely for miles and miles."
            ],
            'riodeangeles': [
                "The Los Angeles River in the early 21st century was no more than a trickle of water in a concrete basin. Truly a sad sight to see, one could hardly call it a river, and it was devoid of life.",
                "It took decades upon decades to revitalize and restore the river, not only to what it was before, but better than what could be imagined. "
            ],
            'lax': [
                "As a city so intensely centered around cars, when the infrastructural and lifestyle shift took place in Los Angeles, there were many structures such as parking garages that suddenly had no purpose.",
                "This structure, situated in LAX International Airport, was one of the many conversions that took place to use the existing building and space in a repurposed way. "
            ],
            'palisades': [
                "The Pacific Palisades, after the devastating fires of 2025, had a long journey ahead to repair their community.",
                "Certain areas were presented with the unique opportunity of the first testing communities of a more circular way of life, and accepted the challenge. ",
                "Here lies the first neighborhoods that kickstarted the venture into the solar philosophy."
            ],
            'santamonicapier': [
                "Santa Monica Pier was left in ruins after a catastrophic storm in the 30's, part of the series of extreme weather events following continuous lack of change.",
                "The rebuilt pier found a way to honor the history of the area while serving a new purpose of coastline marine life research and public education. "
            ],
            'thewalkoffame': [
                "The Walk of Fame resisted change through the Solar Revolution, battling the drive towards sustainability with the strength of the entertainment industry.",
                " As a widespread shift of public priorities took place in the midst of intense climate disasters, Hollywood struggled, but the worship of celebrities and public figures never quite ceased;",
                "It still stands as a symbol of the early 21st century, and a reminder of persisting consumerist tendencies within people."
            ]
        };

        // INTRO TEXT FOR LOCATIONS
        const location = urlParams.get('location');
        const introTexts = locationIntroTexts[location] || [];
        let textIndex = 0;
        const overlay = document.getElementById("intro-overlay");
        const introText = document.getElementById("intro-text");

        /* 
        // only show on first open
        if (!localStorage.getItem(`introSeen-${location}`)) {
            introText.textContent = introTexts[textIndex];
        
            overlay.addEventListener("click", () => {
                textIndex++;
                if (textIndex < introTexts.length) {
                    introText.textContent = introTexts[textIndex];
                } else {
                    overlay.style.display = "none";
                    localStorage.setItem(`introSeen-${location}`, "true"); // Mark as seen
                }
            });
        } else {
            overlay.style.display = "none"; // Skip if already seen 
        }
        */

        // Always show the intro text
        introText.textContent = introTexts[textIndex];
        overlay.addEventListener("click", () => {
            textIndex++;
            if (textIndex < introTexts.length) {
                introText.textContent = introTexts[textIndex];
            } else {
                overlay.style.display = "none"; // Hide the overlay after the intro
            }
        });



        //BUTTONS FOR WITHIN LOCATIONS
        document.addEventListener("DOMContentLoaded", () => {
            const urlParams = new URLSearchParams(window.location.search);
            const location = urlParams.get('location');

            if (!location) return; // Exit if no location is specified

            // Hide all except current one
            const allLocations = document.querySelectorAll('.location');
            allLocations.forEach(loc => {
                if (loc.id.toLowerCase() !== location.toLowerCase()) {
                    loc.style.display = 'none'; // Hide ones that don't match
                } else {
                    loc.style.display = 'block'; // Ensure the current is visible
                }
            });

            let buttonIndex = 1;
            while (true) {
                const button = document.getElementById(`btn-${location.toLowerCase()}-${buttonIndex}`);
                const textBox = document.getElementById(`text-box-${location.toLowerCase()}-${buttonIndex}`);
                if (!button || !textBox) break;

                const closeTextBoxButton = textBox.querySelector('.close-text-box');


                const buttonRect = button.getBoundingClientRect();
                textBox.style.top = `${buttonRect.top + window.scrollY}px`;
                textBox.style.left = `${buttonRect.left + window.scrollX}px`;

                button.addEventListener("click", () => {
                    textBox.style.display = "block"; // Show text box
                });

                closeTextBoxButton.addEventListener("click", () => {
                    textBox.style.display = "none"; // Hide text box
                });

                buttonIndex++;
            }

            // THE CLICK FOR CONTEXT IMAGE
            const stillImage = document.createElement("img");
            stillImage.src = `contextimgs/${location.toLowerCase()}.jpg`;
            stillImage.style.position = "absolute";
            stillImage.style.top = "0";
            stillImage.style.left = "0";
            stillImage.style.width = "100%";
            stillImage.style.height = "100%";
            stillImage.style.display = "none";
            stillImage.style.zIndex = "10"; // above other elements
            stillImage.style.pointerEvents = "none"; // avoid blocking button
            document.body.appendChild(stillImage);

            // Get hold button for current location
            const holdButton = document.getElementById(`hold-${location.toLowerCase()}`);
            if (!holdButton) return;

            // Show still image on mousedown
            holdButton.addEventListener("mousedown", () => {
                stillImage.style.display = "block";
            });

            // Hide still image on mouseup
            holdButton.addEventListener("mouseup", () => {
                stillImage.style.display = "none";
            });

            // Hide still image if the mouse leaves the button
            holdButton.addEventListener("mouseleave", () => {
                stillImage.style.display = "none";
            });


        });
    </script>

</body>

</html>